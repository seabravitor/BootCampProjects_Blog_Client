(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{135:function(e,t,a){},162:function(e,t,a){},195:function(e,t){},196:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(34),c=a.n(r),o=(a(162),a(163),a(27)),i=a.n(o),l=a(13),d=a(40),j=a(63),u=a(64),b=a(75),h=a(73),g=a(30),O=a.n(g),m=a(54),p=a(10),x=(a(135),a(2));var f=function(e){return Object(x.jsxs)("div",{className:"postsGeneral",children:[Object(x.jsx)("span",{children:Object(x.jsx)("img",{src:e.img,alt:e.alt})}),Object(x.jsxs)("span",{className:"postIntro",children:[Object(x.jsx)("h2",{children:e.title}),Object(x.jsx)("h4",{children:e.metaDescription})]}),Object(x.jsxs)("span",{className:"postDetails",children:[Object(x.jsx)("h5",{children:e.writer}),Object(x.jsx)("h6",{children:e.createdAt})]}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{children:Object(x.jsx)("p",{className:"postBody",children:e.body})}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{})]},e.index)},v="http://localhost:3001",w=function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).getData=function(){O.a.get("".concat(v,"/posts")).then((function(e){console.log("data has being received ==>",e.data);var t=e.data;n.setState({catalogue:t})})).catch((function(){alert("Error retrieving data!")}))},n.handleOnChange=function(e){n.setState({title:e.target.value}),n.setState({writer:e.target.value}),e.preventDefault(),console.log("title ===>",n.state.title);var t=n.state.catalogue;console.log("previousList ======>",t);var a=t.filter((function(e){return e.title.toLowerCase().includes(n.state.title)}))&&t.filter((function(e){return e.writer.toLowerCase().includes(n.state.writer)}));console.log("newList ===>",a),n.setState({filtered:a})},n.handleOnClick=function(e){e.preventDefault()},n.state={catalogue:[],title:"",filtered:[]},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e;return e=""!==this.state.title?this.state.filtered.map((function(e,t){return Object(x.jsx)(f,{title:e.title,body:e.body,createdAt:e.createdAt,img:e.img,metaDescription:e.metaDescription,writer:e.writer,alt:e.alt},t)})):this.state.catalogue.map((function(e,t){return Object(x.jsx)(f,{title:e.title,body:e.body,createdAt:e.createdAt,img:e.img,metaDescription:e.metaDescription,writer:e.writer,alt:e.alt},t)})),Object(x.jsxs)("div",{children:[Object(x.jsx)("form",{onChange:this.handleOnChange,onSubmit:this.handleOnClick,children:Object(x.jsx)("input",{placeholder:" \ud83d\udd0d Search Blog...",className:"search-blog"})}),Object(x.jsx)("span",{children:e})]})}}]),a}(s.a.Component),y=a(37),S=a(82),k=a(212),I=a(210),D=a(197),N=function(e){var t=Object(n.useState)({email:"",password:"",password2:""}),a=Object(S.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)(""),o=Object(S.a)(c,2),j=o[0],u=o[1],b=function(){var t=Object(d.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,O.a.post("".concat(v,"/users/register"),{email:s.email,password:s.password,password2:s.password2});case 4:n=t.sent,u(n.data.message),n.data.ok&&setTimeout((function(){e.history.push("/login")}),2e3),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsxs)(k.a,{onChange:function(e){r(Object(l.a)(Object(l.a)({},s),{},Object(y.a)({},e.target.name,e.target.value)))},onSubmit:b,className:"register",children:[Object(x.jsx)(k.a.Field,{control:I.a,label:"Email",name:"email"}),Object(x.jsx)(k.a.Field,{control:I.a,label:"Password",name:"password"}),Object(x.jsx)(k.a.Field,{control:I.a,label:"Repeat Password",name:"password2"}),Object(x.jsx)(k.a.Field,{control:D.a,onSubmit:b,children:"Submit"})]}),Object(x.jsx)("div",{className:"message",children:Object(x.jsx)("h4",{children:j})})]})},L=function(e){var t=Object(n.useState)({email:"",password:""}),a=Object(S.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)(""),o=Object(S.a)(c,2),j=o[0],u=o[1],b=function(){var t=Object(d.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,O.a.post("".concat(v,"/users/login"),{email:s.email,password:s.password});case 4:n=t.sent,u(n.data.message),n.data.ok&&setTimeout((function(){e.login(n.data.token),e.history.push("/admin")}),2e3),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsxs)(k.a,{onChange:function(e){r(Object(l.a)(Object(l.a)({},s),{},Object(y.a)({},e.target.name,e.target.value)))},onSubmit:b,className:"login",children:[Object(x.jsx)(k.a.Field,{control:I.a,label:"Email",name:"email"}),Object(x.jsx)(k.a.Field,{control:I.a,label:"Password",name:"password"}),Object(x.jsx)(k.a.Field,{control:D.a,children:"Submit"})]}),Object(x.jsx)("div",{className:"message",children:Object(x.jsx)("h4",{children:j})})]})},C=function(e){var t=e.isLoggedIn;return Object(x.jsxs)("div",{className:"navbar",children:[Object(x.jsx)(m.b,{exact:!0,to:"/",children:"Blogs"}),t?null:[Object(x.jsx)(m.b,{exact:!0,to:"/register",children:"Register"}),Object(x.jsx)(m.b,{exact:!0,to:"/login",children:"Login"})],t?[Object(x.jsx)(m.b,{exact:!0,to:"/create",children:"Create"}),Object(x.jsx)(m.b,{exact:!0,to:"/admin",children:"Admin"})]:null]})},F=function(e){return Object(x.jsxs)("div",{className:"admin",children:[Object(x.jsx)("h1",{children:"Admin Page"}),Object(x.jsx)("button",{onClick:function(){e.history.push("/"),e.logout()},children:"Logout"})]})},B=a(211),A=a(213),T=a(143),E=a.n(T),P=function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={title:"",metaDescription:"",keywords:"",body:"",writer:"",createdAt:new Date,img:""},e.handleSubmit=function(){var t=Object(d.a)(i.a.mark((function t(a){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),n={title:e.state.title,metaDescription:e.state.metaDescription,keywords:e.state.keywords,body:e.state.body,writer:e.state.writer,createdAt:e.state.createdAt,img:e.state.img},console.log("dataLoad ===>",n),O()({url:"".concat(v,"/posts/create"),method:"POST",data:n}).then((function(e){200===e.status&&(window.location="/")})).catch((function(e){console.log("Internal server error => ",e)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target.name,n=t.target.value;e.setState(Object(y.a)({},a,n)),console.log(Object(y.a)({},a,n))},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{className:"createBlogTitle",children:"... Everything you can imagine is real ..."}),Object(x.jsxs)(k.a,{onChange:this.handleChange,onSubmit:this.handleSubmit,children:[Object(x.jsx)(k.a.Field,{control:I.a,label:"Title",name:"title",value:this.state.title,placeholder:"Title",className:"createBlogInputs"}),Object(x.jsx)(k.a.Field,{control:I.a,label:"Keywords",name:"keywords",placeholder:"Keywords (SEO)",value:this.state.keywords,className:"createBlogInputs"}),Object(x.jsx)(k.a.Field,{control:I.a,label:"Author",placeholder:"Full Name",name:"writer",value:this.state.writer,className:"createBlogInputs"}),Object(x.jsx)(k.a.Field,{control:B.a,label:"Metadescription",placeholder:"Blog Description",name:"metaDescription",value:this.state.metaDescription,className:"createBlogMeta"}),Object(x.jsx)(k.a.Field,{control:Date,name:"createdAt",value:this.state.createdAt,className:"createBlogOthers"}),Object(x.jsx)(k.a.Field,{control:B.a,label:"Here it goes your text",placeholder:"Tell us more about what do you want share today...",name:"body",value:this.state.body,className:"createBlogBody"}),Object(x.jsx)(k.a.Field,{control:A.a,label:"I agree to the Terms and Conditions",className:"createBlogOthers"}),Object(x.jsx)(E.a,{withIcon:!0,buttonText:"Choose images",onChange:this.onDrop,imgExtension:[".jpg",".gif",".png",".gif"],maxFileSize:5242880,name:"img",value:this.state.img,className:"createBlogOthers"}),Object(x.jsx)(k.a.Field,{control:D.a,onSubmit:this.handleSubmit,className:"createBlogButton",children:"Submit"})]})]})}}]),a}(n.Component),M=(a(195),function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={catalogue:[],error:"",search:"",filtered:[],isLoggedIn:!1},e.verify_token=Object(d.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(a=JSON.parse(localStorage.getItem("token")))){t.next=3;break}return t.abrupt("return",e.setState(Object(l.a)(Object(l.a)({},e.state),{},{isLoggedIn:!1})));case 3:return t.prev=3,O.a.defaults.headers.common.Authorization=a,t.next=7,O.a.post("http://localhost:3001/users/verify_token");case 7:return n=t.sent,t.abrupt("return",n.data.ok?e.setState(Object(l.a)(Object(l.a)({},e.state),{},{isLoggedIn:!0})):e.setState(Object(l.a)(Object(l.a)({},e.state),{},{isLoggedIn:!1})));case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])}))),e.login=function(t){localStorage.setItem("token",JSON.stringify(t)),console.log("token ===>",t),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{isLoggedIn:!0})),console.log("isLoggedIn ===>",e.state.isLoggedIn)},e.logout=function(){localStorage.removeItem("token"),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{isLoggedIn:!1}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.verify_token()}},{key:"render",value:function(){var e=this;return Object(x.jsx)("div",{children:Object(x.jsxs)(m.a,{children:[Object(x.jsx)(C,{className:"navbar",isLoggedIn:this.state.isLoggedIn}),Object(x.jsx)(p.b,{exact:!0,path:"/",component:w}),Object(x.jsx)(p.b,{path:"/login",render:function(t){return e.state.isLoggedIn?Object(x.jsx)(p.a,{to:"/admin"}):Object(x.jsx)(L,Object(l.a)({login:e.login},t))}}),Object(x.jsx)(p.b,{path:"/register",render:function(t){return e.state.isLoggedIn?Object(x.jsx)(p.a,{to:"/admin"}):Object(x.jsx)(N,Object(l.a)({},t))}}),Object(x.jsx)(p.b,{path:"/admin",render:function(t){return e.state.isLoggedIn?Object(x.jsx)(F,Object(l.a)({logout:e.logout},t)):Object(x.jsx)(p.a,{to:"/"})}}),Object(x.jsx)(p.b,{path:"/create",render:function(t){return e.state.isLoggedIn?Object(x.jsx)(P,{}):Object(x.jsx)(p.a,{to:"/login"})}})]})})}}]),a}(s.a.Component)),J=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,214)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};c.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(M,{})}),document.getElementById("root")),J()}},[[196,1,2]]]);
//# sourceMappingURL=main.5805ff9c.chunk.js.map